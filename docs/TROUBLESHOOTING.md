# トラブルシューティング

このドキュメントでは、Static My Pageの使用中に発生する可能性のある問題と、その解決方法を説明します。

## 目次

1. [データ関連の問題](#データ関連の問題)
2. [ポモドーロタイマーの問題](#ポモドーロタイマーの問題)
3. [表示・UI関連の問題](#表示ui関連の問題)
4. [パフォーマンスの問題](#パフォーマンスの問題)
5. [ブラウザ互換性の問題](#ブラウザ互換性の問題)

---

## データ関連の問題

### データが保存されない

#### 症状
- リンクやTODOを追加しても、ページをリロードすると消える
- 設定が保存されない

#### 原因
1. LocalStorageが無効になっている
2. プライベートブラウジングモード（シークレットモード）を使用している
3. ブラウザのストレージ容量が上限に達している
4. ブラウザの設定でCookieやストレージがブロックされている

#### 解決方法

**1. LocalStorageが有効か確認**

Chromeの場合：
```
1. 開発者ツールを開く（F12キー）
2. Consoleタブを開く
3. 以下を入力して実行：
   localStorage.setItem('test', 'test');
   localStorage.getItem('test');
```

エラーが出なければLocalStorageは有効です。

**2. プライベートモードを確認**
- 通常モードで使用してください
- プライベートモードでは、セッション終了時にデータが削除されます

**3. ブラウザのストレージ設定を確認**

Chromeの場合：
```
1. 設定 → プライバシーとセキュリティ
2. Cookieと他のサイトデータ
3. 「サイトにCookieデータの保存と読み取りを許可する」が有効か確認
```

**4. ストレージをクリア後に再試行**
```
1. 開発者ツール（F12） → Applicationタブ
2. Local Storage → サイトのURLを右クリック → Clear
3. ページをリロード
```

---

### データが失われた

#### 症状
- 以前保存したデータが突然消えた
- ページが初期状態に戻っている

#### 原因
1. ブラウザのキャッシュ/データをクリアした
2. ブラウザが異なる、またはデバイスが異なる
3. ブラウザの自動クリーンアップ機能が動作した

#### 解決方法

**バックアップから復元:**
1. エクスポートしたJSONファイルを探す
2. インポート機能で復元

**今後の対策:**
- 定期的にデータをエクスポート（週1回推奨）
- エクスポートファイルをクラウドストレージに保存

---

### インポートが失敗する

#### 症状
- JSONファイルをインポートしようとするとエラーが出る
- インポートしてもデータが反映されない

#### 原因
1. JSONファイルが破損している
2. ファイル形式が正しくない
3. 別のアプリケーションのJSONファイルを使っている

#### 解決方法

**1. JSONファイルの検証**
```
1. JSONファイルをテキストエディタで開く
2. オンラインのJSONバリデータで検証
   例: https://jsonlint.com/
```

**2. エクスポート形式の確認**
- このアプリでエクスポートしたファイルのみがインポート可能
- 手動編集したJSONは動作しない場合があります

**3. 再エクスポート**
- 可能であれば、元の環境で再度エクスポート
- 最新のバックアップを使用

---

## ポモドーロタイマーの問題

### タイマーの通知が表示されない

#### 症状
- タイマー完了時にブラウザ通知が表示されない
- 「ブラウザ通知を表示」がONなのに通知が来ない

#### 原因
1. ブラウザの通知許可がない
2. Windowsの通知設定が無効
3. フォーカスアシスト（集中モード）が有効
4. サイレントモードになっている

#### 解決方法

**1. ブラウザの通知許可を確認**

Chrome/Edgeの場合：
```
1. アドレスバーの左側の鍵アイコンをクリック
2. 「このサイトの設定」をクリック
3. 「通知」が「許可」になっているか確認
```

または：
```
1. chrome://settings/content/notifications
2. サイトのURLが「許可」に含まれているか確認
```

**2. Windowsの通知設定を確認**
```
1. Windowsの「設定」を開く
2. 「システム」→「通知」
3. 「アプリやその他の送信者からの通知を取得する」がONか確認
4. Chrome/Edgeの通知がONになっているか確認
```

**3. フォーカスアシスト（集中モード）を確認**
```
1. Windowsの「設定」→「システム」→「集中モード」
2. 「オフ」または「重要な通知のみ」に設定
```

**4. テスト通知を送る**

開発者ツールのConsoleで以下を実行：
```javascript
new Notification('テスト通知', { body: 'これはテストです' });
```

これで通知が表示されれば、ブラウザ設定は正しいです。

---

### タイマーの音が鳴らない

#### 症状
- サウンド通知がONなのに音が鳴らない
- 音量が小さい、または聞こえない

#### 原因
1. 端末がミュートになっている
2. ブラウザのタブがミュートされている
3. システム音量が低い
4. サウンド通知の設定が間違っている

#### 解決方法

**1. 端末のミュートを確認**
- タスクバーのスピーカーアイコンを確認
- ミュートが解除されているか確認

**2. ブラウザタブのミュートを確認**
- タブにスピーカーアイコンが表示されていないか確認
- 表示されている場合、クリックして解除

**3. サウンド通知の設定を確認**
```
1. ポモドーロタイマー設定を開く
2. 「サウンド通知（タイマー完了時）」がONか確認
3. 「サウンド通知（残り20%時）」の設定も確認
```

**4. ブラウザの音声許可を確認**
```
1. アドレスバーの鍵アイコン → サイトの設定
2. 「音声」が「許可」になっているか確認
```

**5. Web Audio APIの動作確認**

開発者ツールのConsoleで以下を実行：
```javascript
const audioContext = new AudioContext();
const osc = audioContext.createOscillator();
osc.connect(audioContext.destination);
osc.start();
setTimeout(() => osc.stop(), 1000);
```

1秒間音が鳴れば、オーディオは動作しています。

---

### ポモドーロタイマーを非表示にしたが再表示できない

#### 症状
- 「ポモドーロタイマーを表示する」をOFFにしたら消えた
- どこから再表示すればいいかわからない

#### 解決方法

**手順:**
```
1. ページ下部のフッターにある「ナビゲーション設定」ボタンをクリック
2. 「ポモドーロタイマー設定」を選択（チェックが外れていてもクリック可能）
3. 設定画面が開くので、「ポモドーロタイマーを表示する」にチェックを入れる
4. 「設定を保存」をクリック
```

タイマーがヘッダーに再表示されます。

---

### タイマーが勝手にリセットされる

#### 症状
- タイマーを開始したのに、ページをリロードすると初期状態に戻る
- セッション数がリセットされる

#### 原因
1. LocalStorageが無効
2. プライベートブラウジングモード使用中
3. ブラウザのストレージ制限

#### 解決方法

[「データが保存されない」](#データが保存されない)を参照してください。

---

### タイマーの時刻がずれる

#### 症状
- タイマーの残り時間が実際の経過時間と合わない
- 1秒ごとのカウントダウンが不正確

#### 原因
1. ブラウザタブがバックグラウンドになり、JavaScriptが一時停止
2. PCがスリープモードに入った
3. ブラウザのパフォーマンス制限

#### 解決方法

**これは技術的な制限です:**
- ブラウザはバックグラウンドタブのJavaScriptを制限します
- タイマーを使用中は、タブをアクティブに保ってください

**ワークアラウンド:**
- 別のポモドーロタイマーアプリ（デスクトップアプリ）を併用
- ブラウザのウィンドウを常に表示

---

## 表示・UI関連の問題

### レイアウトが崩れる

#### 症状
- ボタンの配置がおかしい
- テキストが重なっている
- 要素がはみ出している

#### 原因
1. ブラウザのズームレベルが100%ではない
2. 画面サイズが小さすぎる
3. CSSファイルが読み込まれていない

#### 解決方法

**1. ズームレベルを確認**
```
- Ctrl + 0（ゼロ）でズームをリセット
- または、ブラウザのメニュー → ズームを100%に設定
```

**2. ウィンドウサイズを調整**
- 最小推奨幅: 768px
- モバイルの場合はレスポンシブデザインが適用されます

**3. CSSの読み込み確認**
```
1. 開発者ツール（F12）→ Networkタブ
2. ページをリロード
3. style.cssが200ステータスで読み込まれているか確認
```

---

### フォントが表示されない・文字化けする

#### 症状
- 日本語が豆腐（□）で表示される
- フォントがおかしい

#### 原因
1. ブラウザのフォント設定
2. システムの日本語フォントが不足

#### 解決方法

**ブラウザのフォント設定を確認:**
```
Chrome: 設定 → デザイン → フォントをカスタマイズ
Firefox: 設定 → 言語と外観 → フォント → 詳細設定
```

日本語フォントが正しく設定されているか確認してください。

---

### モーダルが閉じない

#### 症状
- リンク編集画面やポモドーロ設定画面が閉じられない
- 「閉じる」ボタンが反応しない

#### 解決方法

**1. Escキーを押す**

**2. モーダル外側の暗い部分をクリック**

**3. ページをリロード**
```
Ctrl + R または F5キー
```

---

## パフォーマンスの問題

### ページの動作が遅い

#### 症状
- ボタンのクリックに時間がかかる
- スクロールがカクカクする

#### 原因
1. ブラウザのメモリ不足
2. 大量のデータを保存している
3. 他のタブやアプリが多数起動中

#### 解決方法

**1. ブラウザのキャッシュをクリア**
```
Ctrl + Shift + Delete → キャッシュをクリア
```

**2. 不要なデータを削除**
- 古いプロジェクトページを削除
- 完了したTODOを削除
- 不要なリンクを整理

**3. ブラウザを再起動**

**4. 他のタブを閉じる**

---

### ポモドーロタイマーが重い

#### 症状
- タイマー表示時にブラウザが遅くなる
- CPU使用率が高い

#### 解決方法

**タイマーを最小化または非表示に:**
```
1. タイマーの「−」ボタンで最小化
2. または、設定で「ポモドーロタイマーを表示する」をOFF
```

---

## ブラウザ互換性の問題

### Internet Explorerで動作しない

#### 症状
- ページが表示されない
- 機能が動作しない

#### 原因
Internet Explorerは非対応です。

#### 解決方法

モダンなブラウザを使用してください：
- Google Chrome
- Mozilla Firefox
- Microsoft Edge（Chromium版）
- Safari

---

### モバイルブラウザで使いにくい

#### 症状
- ボタンが小さくてタップしにくい
- レイアウトが崩れる

#### 解決方法

**レスポンシブデザインが適用されています:**
- 画面幅768px以下で自動的にモバイル向けレイアウトに切り替わります
- ブラウザをリロードしてみてください

**推奨ブラウザ（モバイル）:**
- Chrome for Android
- Safari for iOS

---

## その他の問題

### 問題が解決しない場合

以下の情報を含めて、GitHubのIssuesに報告してください：

**必要な情報:**
- OS（Windows 10, macOS, etc.）
- ブラウザ名とバージョン
- 問題の詳細な説明
- 再現手順
- スクリーンショット（可能であれば）
- 開発者ツールのConsoleのエラーメッセージ

**GitHubリポジトリ:**
https://github.com/j-komatsu/static-my-page/issues

---

## デバッグ方法

### 開発者ツールの使い方

**開発者ツールを開く:**
- Windows/Linux: F12 または Ctrl + Shift + I
- Mac: Cmd + Option + I

**Consoleタブでエラーを確認:**
```
赤い文字でエラーメッセージが表示されていないか確認
```

**Networkタブでリソースの読み込みを確認:**
```
すべてのファイル（HTML, CSS, JS）が200ステータスで読み込まれているか確認
```

**Applicationタブ（Chrome）/ ストレージタブ（Firefox）:**
```
Local Storageのデータを確認・編集できます
```

---

最終更新: 2026年2月
