# static-my-page-lite プロジェクト計画書

## プロジェクト概要

### 目的
現在の `static-my-page` の派生として、ブックマーク機能のみに特化したシンプルな `static-my-page-lite` を作成する。

### コンセプト
- **シンプル**: ブックマーク管理のみに特化
- **軽量**: 不要な機能を削除し、高速化
- **使いやすい**: 初心者でもすぐに使える
- **完全独立**: 別リポジトリとして管理

---

## スコープ定義

### ✅ 保持する機能

#### 1. リンク管理機能（コア機能）
- セクション別のリンク整理（6セクション）
- リンクの追加・編集・削除
- セクション名の編集
- ドラッグ&ドロップでの並び替え
- 1行表示（コンパクト）モード
- ヘッダーリンク機能

#### 2. データ管理機能
- LocalStorageへの自動保存
- データのエクスポート（JSON）
- データのインポート（JSON）

#### 3. 基本UI
- レスポンシブデザイン
- モーダルダイアログ
- ドラッグ&ドロップUI

### ❌ 削除する機能

#### 1. プロジェクト管理
- 複数プロジェクトページの作成
- プロジェクト切り替え
- プロジェクトタブ

#### 2. TODOリスト
- タスク管理機能全体

#### 3. メモ機能
- メモ作成・編集・削除機能全体

#### 4. カレンダー機能
- イベント管理機能全体

#### 5. ポモドーロタイマー
- タイマー機能全体
- サウンド通知
- ブラウザ通知

#### 6. ナビゲーション設定
- ボタンの表示/非表示切り替え
- ボタンの並び替え

---

## ファイル構造比較

### 現在の static-my-page
```
static-my-page/
├── index.html                 (約600行)
├── css/
│   └── style.css             (約1500行)
├── js/
│   ├── script.js             (約7000行)
│   └── storage-manager.js    (約100行)
├── docs/
│   ├── FEATURES.md
│   ├── SETUP.md
│   ├── TROUBLESHOOTING.md
│   ├── ARCHITECTURE.md
│   ├── CONTRIBUTING.md
│   └── CHANGELOG.md
├── .claude/
│   └── project_instructions.md
└── README.md
```

### 新しい static-my-page-lite
```
static-my-page-lite/
├── index.html                 (約200行、推定 -67%)
├── css/
│   └── style.css             (約500行、推定 -67%)
├── js/
│   ├── script.js             (約2000行、推定 -71%)
│   └── storage-manager.js    (約80行、再利用)
├── docs/
│   ├── README.md             (簡略版)
│   └── CHANGELOG.md
└── README.md
```

**推定コード削減量**: 約70%削減（7000行 → 2000行）

---

## 機能詳細

### 1. リンク管理（唯一のメイン機能）

#### 1.1 セクション管理
- デフォルト6セクション（変更可能）
- セクション名の編集（クリックで編集）
- セクションの表示/非表示（オプション）

#### 1.2 リンク管理
- リンクの追加（URL、テキスト）
- リンクの編集（モーダルダイアログ）
- リンクの削除（確認ダイアログ）
- リンクの並び替え（ドラッグ&ドロップ）

#### 1.3 表示モード
- 通常モード: カード型表示
- コンパクトモード: 1行表示

#### 1.4 ヘッダーリンク
- ヘッダーに常時表示されるリンク
- 追加・編集・削除

### 2. データ管理

#### 2.1 自動保存
- LocalStorageへの即座の保存
- 編集時に自動保存

#### 2.2 エクスポート
- JSON形式でダウンロード
- ファイル名: `bookmarks-YYYY-MM-DD.json`

#### 2.3 インポート
- JSON形式のアップロード
- データ検証機能
- エラーハンドリング

### 3. UI/UX

#### 3.1 シンプルなヘッダー
- タイトル（編集可能）
- ヘッダーリンク
- データ管理ボタン

#### 3.2 メインコンテンツ
- 6つのセクション（グリッドレイアウト）
- 各セクションにリンクカード

#### 3.3 フッター
- クレジット表示のみ

---

## データモデル

### LocalStorageキー構造（簡略化）

```javascript
// メインデータ（1つのキーのみ）
liteData: {
  title: 'My Bookmarks',  // ページタイトル
  sections: {
    'section1': {
      name: 'セクション1',
      links: [
        { text: 'リンク名', url: 'https://...', inline: false }
      ]
    },
    'section2': { ... },
    'section3': { ... },
    'section4': { ... },
    'section5': { ... },
    'section6': { ... }
  },
  headerLinks: [
    { text: 'ヘッダーリンク', url: 'https://...' }
  ]
}
```

**削減されるキー:**
- `projectData_<projectName>`: プロジェクトデータ（削除）
- `pomodoroSettings_global`: ポモドーロ設定（削除）
- `pomodoroState_global`: ポモドーロ状態（削除）
- `navigationButtonSettings`: ナビゲーション設定（削除）
- `navigationButtonOrder`: ナビゲーション順序（削除）

---

## 主要関数リスト（簡略化）

### js/script.js（約2000行）

#### 初期化
- `initializeApp()` - アプリ初期化
- `loadData()` - データ読み込み
- `renderAll()` - 全体の再描画

#### リンク管理
- `editLinks(sectionId)` - リンク編集モーダルを開く
- `addLink()` - リンク追加
- `deleteLink(sectionId, index)` - リンク削除
- `saveSectionName(sectionId)` - セクション名保存
- `renderLinks(sectionId)` - リンク一覧描画
- `toggleInlineMode(sectionId, index)` - コンパクトモード切り替え

#### ドラッグ&ドロップ
- `handleDragStart(e)` - ドラッグ開始
- `handleDragOver(e)` - ドラッグ中
- `handleDrop(e)` - ドロップ時

#### ヘッダーリンク
- `editHeaderLinks()` - ヘッダーリンク編集
- `addHeaderLink()` - ヘッダーリンク追加
- `deleteHeaderLink(index)` - ヘッダーリンク削除
- `renderHeaderLinks()` - ヘッダーリンク描画

#### タイトル編集
- `editMainTitle()` - タイトル編集
- `saveMainTitle()` - タイトル保存

#### データ管理
- `exportData()` - データエクスポート
- `importData(event)` - データインポート
- `validateImportData(data)` - インポートデータ検証

#### モーダル管理
- `openModal(modalId)` - モーダルを開く
- `closeModal(modalId)` - モーダルを閉じる

#### ユーティリティ
- `saveData()` - LocalStorageに保存
- `generateId()` - ユニークID生成

**削除される関数（推定約5000行）:**
- プロジェクト管理関連（約800行）
- TODO管理関連（約600行）
- メモ管理関連（約700行）
- カレンダー管理関連（約900行）
- ポモドーロタイマー関連（約2000行）
- ナビゲーション設定関連（約500行）

---

## UI設計

### レイアウト

#### ヘッダー（シンプル）
```
+----------------------------------------------------------+
|  [My Bookmarks]    [Link1] [Link2] [Link3]    [Export]  |
+----------------------------------------------------------+
```

#### メインコンテンツ（グリッド）
```
+---------------------------+---------------------------+
| セクション1                | セクション2                |
| [+] [編集]                | [+] [編集]                |
|                           |                           |
| 🔗 Google                 | 🔗 GitHub                 |
| 🔗 YouTube                | 🔗 Stack Overflow         |
+---------------------------+---------------------------+
| セクション3                | セクション4                |
| ...                       | ...                       |
+---------------------------+---------------------------+
| セクション5                | セクション6                |
| ...                       | ...                       |
+---------------------------+---------------------------+
```

#### フッター
```
+----------------------------------------------------------+
|        Static My Page Lite v1.0.0 | MIT License          |
+----------------------------------------------------------+
```

### モーダルダイアログ

#### リンク編集モーダル
```
+----------------------------------------+
| セクション名: [セクション1       ] [保存] |
|                                        |
| リンク一覧:                            |
| 1. [Google          ] [https://...]   |
|    [編集] [削除] [☰] [1行表示]         |
|                                        |
| 2. [YouTube         ] [https://...]   |
|    [編集] [削除] [☰] [1行表示]         |
|                                        |
| [+ 新しいリンクを追加]                  |
|                                        |
|                          [閉じる]      |
+----------------------------------------+
```

---

## CSSクラス設計（簡略化）

### 主要クラス

```css
/* レイアウト */
.header { }
.main-content { }
.footer { }

/* セクション */
.section-grid { }
.section { }
.section-header { }
.section-title { }

/* リンク */
.links-container { }
.link-item { }
.link-item.inline { }  /* コンパクトモード */

/* ヘッダーリンク */
.header-links { }
.header-link { }

/* ボタン */
.btn { }
.btn-primary { }
.btn-secondary { }
.btn-danger { }

/* モーダル */
.modal { }
.modal-dialog { }
.modal-content { }
.modal-header { }
.modal-body { }
.modal-footer { }

/* ユーティリティ */
.draggable { }
.drag-over { }
.hidden { }
```

**削除されるクラス:**
- `.project-tabs { }` - プロジェクトタブ
- `.todo-list { }` - TODOリスト
- `.memo-list { }` - メモ
- `.calendar { }` - カレンダー
- `.pomodoro-timer { }` - ポモドーロタイマー
- `.navigation-buttons { }` - ナビゲーション
- その他約1000行のCSS

---

## 実装方針の変更（2026-02-04更新）

### 新しいアプローチ

**元のstatic-my-pageをコピーして削除する方式**に変更

#### 理由
1. 元のコードの動作が確実に踏襲できる
2. 既存のバグ修正やUIの調整がそのまま活かせる
3. 実装工数が削減できる
4. 保守性が高い

### 作業手順

#### Phase 1: static-my-pageを全コピー（手動）

```bash
# static-my-page-lite を一度削除
rm -rf static-my-page-lite

# static-my-page を static-my-page-lite としてコピー
cp -r static-my-page static-my-page-lite
cd static-my-page-lite
```

#### Phase 2: 不要な機能を削除（コード削除）

**削除する機能:**
1. ✗ TODOリスト機能
2. ✗ メモ機能
3. ✗ カレンダー機能
4. ✗ ポモドーロタイマー（通知許可ダイアログが煩わしい）
5. ✗ ナビゲーション設定機能

**残す機能:**
1. ✓ リンク管理（6セクション）
2. ✓ ヘッダーリンク（最大5個）
3. ✓ ページ追加機能（プロジェクト管理）
4. ✓ データエクスポート/インポート
5. ✓ ドラッグ&ドロップ並び替え
6. ✓ 1行表示モード

**削除対象ファイル・コード:**

##### HTML削除箇所
- ポモドーロタイマーのHTML全体
- TODOセクション
- メモセクション
- カレンダーセクション
- ナビゲーション設定ボタン
- 関連するモーダルダイアログ

##### JavaScript削除箇所
```javascript
// 削除する関数群
- initializePomodoroTimer()
- togglePomodoroTimer()
- resetPomodoroTimer()
- 全てのポモドーロ関連関数（約2000行）
- TODO関連関数（約600行）
- メモ関連関数（約700行）
- カレンダー関連関数（約900行）
- ナビゲーション設定関連関数（約500行）
```

##### CSS削除箇所
```css
/* 削除するスタイル */
- .pomodoro-timer { }
- .todo-list { }
- .memo-list { }
- .calendar { }
- .navigation-buttons { }
- その他関連スタイル（約1000行）
```

#### Phase 3: データモデルの簡略化

**変更前（static-my-page）:**
```javascript
// 10+ のLocalStorageキー
mainData
projectData_<name>
pomodoroSettings_global
pomodoroState_global
navigationButtonSettings
navigationButtonOrder
```

**変更後（static-my-page-lite）:**
```javascript
// 3つのキーのみ
liteData              // メインページ
liteData_<pageName>   // 各ページ
litePages             // ページリスト
```

#### Phase 4: UI調整

1. **表示領域を横に広げる**
   - `max-width: 1200px` → `1600px`
   - `padding: 20px` → `10px`

2. **余白削減**
   - セクション間のgapを縮小
   - 不要な余白を削除

3. **1行表示の修正**
   - 元の動作を確実に踏襲
   - `.link-card.inline` スタイルをそのまま使用

#### Phase 5: テストとドキュメント

1. 機能テスト（削除した機能が呼ばれないことを確認）
2. README.md を簡略版に書き換え
3. CHANGELOG.md を更新

---

## 期待される成果（修正版）

### コード削減
- **HTML**: 600行 → 250行（-58%）
- **CSS**: 1500行 → 600行（-60%）
- **JavaScript**: 7000行 → 2000行（-71%）
- **合計**: 9100行 → 2850行（-69%）

### 削除される機能による改善点

1. **通知許可ダイアログの排除**
   - ポモドーロタイマーを削除することで、セキュリティが高いPCでの煩わしい通知許可確認がなくなる
   - 初回起動時の体験が改善

2. **シンプルな初期化**
   - 不要な機能の初期化処理がなくなり、起動が高速化

3. **保守性の向上**
   - 機能が少ないため、バグが発生しにくい

---

## マイルストーン（修正版）

### v1.0.0（初期リリース）
- ✅ リンク管理機能（6セクション）
- ✅ ヘッダーリンク（最大5個）
- ✅ ページ追加機能
- ✅ データエクスポート/インポート
- ✅ ドラッグ&ドロップ
- ✅ 1行表示モード
- ✅ レスポンシブデザイン
- ✅ ドキュメント

### 削除された機能
- ✗ TODOリスト
- ✗ メモ
- ✗ カレンダー
- ✗ ポモドーロタイマー（通知許可ダイアログ対策）
- ✗ ナビゲーション設定

---

## 次のステップ

1. ユーザーが手動で `static-my-page-lite` を削除
2. ユーザーが手動で `static-my-page` を `static-my-page-lite` にコピー
3. Claude が不要な機能を削除
4. Claude がUI調整（表示領域拡大、余白削減）
5. Claude がドキュメント更新
6. Git コミット

---

## 重要な変更点まとめ

### 方針変更の理由
- ゼロから作り直すより、既存コードを削除する方が確実
- 元のバグ修正やUI調整がそのまま活かせる
- 1行表示などの細かい動作が確実に踏襲できる

### ユーザーの要望への対応
1. ✓ 元の機能をそのまま踏襲
2. ✓ 1行表示チェックボックスの動作を確実に再現
3. ✓ 表示領域を横に広げる
4. ✓ 余白を削減
5. ✓ 通知許可ダイアログを排除（ポモドーロタイマー削除）

---

最終更新: 2026年2月4日

---

## 期待される成果

### コード削減
- **HTML**: 600行 → 200行（-67%）
- **CSS**: 1500行 → 500行（-67%）
- **JavaScript**: 7000行 → 2000行（-71%）
- **合計**: 9100行 → 2700行（-70%）

### パフォーマンス改善
- **初期読み込み時間**: 推定50%削減
- **メモリ使用量**: 推定60%削減
- **LocalStorage使用量**: 推定80%削減

### ユーザビリティ
- **学習コスト**: 大幅削減（機能が1つのみ）
- **操作性**: シンプルで直感的
- **保守性**: 高い（コードが少ない）

---

## リスクと対策

### リスク1: 既存ユーザーの混乱
- **対策**: 明確に「Lite版」として区別
- **対策**: README で違いを明記

### リスク2: 機能不足の指摘
- **対策**: 「ブックマーク専用」として明確に位置づけ
- **対策**: フル版へのリンクを提供

### リスク3: メンテナンス負担
- **対策**: コードが少ないため、メンテナンスは容易
- **対策**: フル版との同期は不要（独立）

---

## 今後の拡張性

### 考えられる追加機能（オプション）

#### 1. セクション数のカスタマイズ
- 6セクション固定 → 可変（3〜12）

#### 2. セクションのカラーテーマ
- セクションごとに色を設定

#### 3. 検索機能
- リンクの全文検索

#### 4. タグ機能
- リンクにタグを付けて分類

#### 5. お気に入り機能
- よく使うリンクをハイライト

ただし、これらは**必須ではない**。v1.0.0ではブックマーク機能のみに集中。

---

## 比較表: static-my-page vs static-my-page-lite

| 項目 | static-my-page | static-my-page-lite |
|------|----------------|---------------------|
| **機能数** | 8機能 | 1機能 |
| **コード行数** | 約9100行 | 約2700行 |
| **LocalStorageキー** | 10+ キー | 1キー |
| **学習時間** | 30分 | 5分 |
| **用途** | 多機能ダッシュボード | ブックマーク管理 |
| **対象ユーザー** | パワーユーザー | 初心者・シンプル志向 |
| **メンテナンス** | 複雑 | 容易 |

---

## マイルストーン

### v1.0.0（初期リリース）
- ✅ リンク管理機能
- ✅ データエクスポート/インポート
- ✅ レスポンシブデザイン
- ✅ ドラッグ&ドロップ
- ✅ ヘッダーリンク
- ✅ ドキュメント

### v1.1.0（将来的なアップデート、オプション）
- 検索機能
- セクション数のカスタマイズ
- カラーテーマ

---

## 結論

`static-my-page-lite` は、現在の `static-my-page` の70%のコードを削減し、ブックマーク管理に特化したシンプルなアプリケーションです。

### 主な利点
1. **シンプル**: 機能が1つだけで理解しやすい
2. **軽量**: 高速で動作
3. **保守性**: コードが少なく、メンテナンスが容易
4. **独立性**: フル版とは別のリポジトリで管理

### 開発期間
- 推定: **7〜8日**（約1週間）
- フルタイム作業を想定

### 次のステップ
1. この計画書のレビュー
2. 承認後、Phase 1（プロジェクト準備）を開始
3. 段階的に実装

---

最終更新: 2026年2月3日
